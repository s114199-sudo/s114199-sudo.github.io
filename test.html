<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>éš¨æ©Ÿèªªæ•…äº‹</title>

  <style>
    body {
      margin: 0;
      min-height: 100vh;
      background: linear-gradient(135deg, #74ebd5, #ACB6E5);
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: "Noto Sans TC", Arial, sans-serif;
    }

    .card {
      background: white;
      padding: 28px;
      border-radius: 20px;
      width: 90%;
      max-width: 380px;
      text-align: center;
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
      border-top: 10px solid #6a11cb;
      transition: border-top-color 0.3s;
    }

    #story {
      font-size: 20px;
      min-height: 80px;
      line-height: 1.6;
      margin: 20px 0;
    }

    button {
      width: 160px;
      padding: 12px 0;
      border: none;
      border-radius: 999px;
      font-size: 16px;
      cursor: pointer;
      color: white;
      background: linear-gradient(135deg, #6a11cb, #2575fc);
      margin-top: 10px;
    }

    #againBtn {
      display: none;
      background: linear-gradient(135deg, #ff512f, #dd2476);
    }

    .music-btn {
      background: #607D8B;
      font-size: 14px;
    }

    .add-area {
      margin-top: 20px;
      text-align: left;
      font-size: 14px;
    }

    .add-area input,
    .add-area select {
      width: 100%;
      padding: 8px;
      margin-top: 6px;
      margin-bottom: 6px;
    }

    .add-area button {
      width: 100%;
      background: #4CAF50;
      font-size: 14px;
    }
  </style>
</head>
<body>

<div class="card" id="card">
  <h2>ğŸ² éš¨æ©Ÿèªªæ•…äº‹</h2>

  <div id="story"></div>

  <button id="startBtn">é–‹å§‹</button>
  <button id="againBtn">å†ä¾†ä¸€æ¬¡</button>
  <button id="musicBtn" class="music-btn">ğŸ”Š é—œé–‰éŸ³æ¨‚</button>

  <div class="add-area">
    <hr>
    <div>æ–°å¢è©èªï¼š</div>
    <select id="type">
      <option value="subjectAdj">ä¸»è©å½¢å®¹è©</option>
      <option value="subject">ä¸»è©</option>
      <option value="place">åœ°é»</option>
      <option value="mood">å¿ƒæƒ…</option>
      <option value="verb">å‹•è©</option>
    </select>
    <input type="text" id="newWord" placeholder="è¼¸å…¥ä½ æƒ³åŠ çš„è©">
    <button id="addBtn">åŠ å…¥è©èª</button>
  </div>
</div>

<!-- ğŸµ èƒŒæ™¯éŸ³æ¨‚ -->
<audio id="bgm" loop preload="auto">
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_9e02c64d4b.mp3" type="audio/mpeg">
</audio>

<!-- ğŸ”Š é»æ“ŠéŸ³æ•ˆ -->
<audio id="clickSound" preload="auto">
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_0e8f0d4f6a.mp3" type="audio/mpeg">
</audio>

<script>
  const data = {
    subjectAdj: ["ç¾éº—çš„","å¾ˆå¤§çš„","å¥½åƒçš„","é«˜æŒ‘çš„","æ‰­æ›²çš„","çŒ¥ç‘£çš„","äº”å½©ç¹½ç´›çš„"],
    subject: ["å°æ˜","æ²³é¦¬","æ±æ–¹æ˜ç å¡”","æé¾","åœŸè±†å…ˆç”Ÿ","è–‘æ¯é´¨","ç‹å‰›"],
    place: ["åœ¨æ²³é‚Š","åœ¨æ‡¸å´–ä¸Š","åœ¨é¦¬æ¡¶æ—","åœ¨å©šç¦®ç¾å ´","åœ¨å¤©èŠ±æ¿ä¸Š","åœ¨æ•™å®¤è£¡","åœ¨ä»–åª½çš„æˆ¿é–“è£¡"],
    mood: ["å¿«æ¨‚çš„","å´©æ½°çš„","ç˜‹ç‹‚çš„","å¦‚é‡‹é‡è² çš„","æ”¾å¿ƒçš„","å“€å‚·çš„","èˆˆå¥®çš„"],
    verb: ["ä¸Šå»æ‰€","èˆå‹•","åŠˆè…¿","ç…®é£¯","æ´—æ¾¡","åˆ·æŠ–éŸ³","å¤§å¿«æœµé ¤"]
  };

  const moodColor = {
    "å¿«æ¨‚çš„": "#4CAF50",
    "èˆˆå¥®çš„": "#FF9800",
    "ç˜‹ç‹‚çš„": "#9C27B0",
    "å´©æ½°çš„": "#F44336",
    "å“€å‚·çš„": "#607D8B",
    "å¦‚é‡‹é‡è² çš„": "#03A9F4",
    "æ”¾å¿ƒçš„": "#009688"
  };

  const storyDiv = document.getElementById("story");
  const card = document.getElementById("card");
  const startBtn = document.getElementById("startBtn");
  const againBtn = document.getElementById("againBtn");
  const musicBtn = document.getElementById("musicBtn");

  const bgm = document.getElementById("bgm");
  const clickSound = document.getElementById("clickSound");

  let musicOn = true;
  let musicStarted = false;

  function random(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
  }

  function typeWriter(text) {
    storyDiv.textContent = "";
    let i = 0;
    const timer = setInterval(() => {
      storyDiv.textContent += text[i];
      i++;
      if (i >= text.length) clearInterval(timer);
    }, 50);
  }

  function generateStory() {
    // é»æ“ŠéŸ³æ•ˆ
    clickSound.currentTime = 0;
    clickSound.play();

    // ç¬¬ä¸€æ¬¡äº’å‹•æ™‚ï¼Œå•Ÿå‹•èƒŒæ™¯éŸ³æ¨‚ï¼ˆé—œéµä¿®æ­£ï¼‰
    if (!musicStarted && musicOn) {
      bgm.play();
      musicStarted = true;
    }

    const mood = random(data.mood);
    const sentence =
      random(data.subjectAdj) +
      random(data.subject) +
      random(data.place) +
      mood +
      random(data.verb);

    typeWriter(sentence);
    card.style.borderTopColor = moodColor[mood] || "#6a11cb";

    startBtn.style.display = "none";
    againBtn.style.display = "block";
  }

  startBtn.onclick = generateStory;
  againBtn.onclick = generateStory;

  musicBtn.onclick = () => {
    if (musicOn) {
      bgm.pause();
      musicBtn.textContent = "ğŸ”ˆ é–‹å•ŸéŸ³æ¨‚";
    } else {
      bgm.play();
      musicBtn.textContent = "ğŸ”Š é—œé–‰éŸ³æ¨‚";
    }
    musicOn = !musicOn;
  };

  document.getElementById("addBtn").onclick = () => {
    const type = document.getElementById("type").value;
    const word = document.getElementById("newWord").value.trim();
    if (word) {
      data[type].push(word);
      document.getElementById("newWord").value = "";
      alert("å·²åŠ å…¥è¾­åº«ï¼");
    }
  };
</script>

</body>
</html>
